<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"
	style=""
	class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers no-applicationcache svg inlinesvg smil svgclippaths">
<head>
<script
	src="https://connect.facebook.net/signals/config/101634609656442?v=2.9.162&amp;r=stable&amp;domain=www.thebanchan.co.kr&amp;hme=e67e7d148043b3a377ad0eb1c82669792a67ba5e3bb5734b69e611ae38f939ca&amp;ex_m=68%2C115%2C102%2C106%2C59%2C3%2C95%2C67%2C15%2C92%2C85%2C49%2C52%2C163%2C166%2C178%2C174%2C175%2C177%2C28%2C96%2C51%2C74%2C176%2C158%2C161%2C171%2C172%2C179%2C124%2C39%2C33%2C136%2C14%2C48%2C184%2C183%2C126%2C17%2C38%2C1%2C41%2C63%2C64%2C65%2C69%2C89%2C16%2C13%2C91%2C88%2C87%2C103%2C50%2C105%2C37%2C104%2C29%2C25%2C159%2C162%2C133%2C27%2C10%2C11%2C12%2C5%2C6%2C24%2C21%2C22%2C55%2C60%2C62%2C72%2C97%2C26%2C73%2C8%2C7%2C77%2C46%2C20%2C99%2C98%2C100%2C93%2C9%2C19%2C18%2C82%2C54%2C80%2C32%2C71%2C0%2C90%2C31%2C79%2C84%2C45%2C44%2C83%2C36%2C4%2C86%2C78%2C42%2C34%2C81%2C2%2C35%2C61%2C40%2C101%2C43%2C76%2C66%2C107%2C58%2C57%2C30%2C94%2C56%2C53%2C47%2C75%2C70%2C23%2C108"
	async=""></script>
<script type="text/javascript" async=""
	src="https://connect.facebook.net/en_US/fbevents.js"></script>
<script type="text/javascript" async=""
	src="https://t1.daumcdn.net/kas/static/kp.js"></script>
<script type="text/javascript" async=""
	src="https://www.googletagmanager.com/gtag/js?id=G-SP88Q82QR0&amp;l=dataLayer&amp;cx=c"></script>
<script async=""
	src="https://www.googletagmanager.com/gtm.js?id=GTM-W97P9F7"></script>
<script src="https://cdn.imqa.io/agent/web-agent-1.1.11.js"></script>
<script src="https://cdn.imqa.io/agent/webview-agent-1.1.3.js"></script>

<script>
				((w, c, _wv, _w, _wk, _mh, _b) => {
					w[c] = w[c] || {};
					function imqaConf(key, value){w[c][key]=value};

					imqaConf("imqaAgentUse", true);
					imqaConf("projectKey", "$2b$05$A7mysom/zbFh9AYDdTEXCuogg2eA3sNI21sSJJLHA2969ii/iyKwi^#Gbv30QRIbcZkWumbVkG6qQ==");
					if ((w[_wk] !== undefined && w[_wk][_mh] !== undefined) || w[_b] !== undefined)
						w[_wv](w);
					else w[_w](w);
				})(window, 'imqaClientConfig', 'IMQAWebviewMain', 'IMQAWebMain', 'webkit', 'messageHandlers', 'ImqaBridge')
			</script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="viewport" content="width=1220">
<meta property="og:image"
	content="https://image.thebanchan.co.kr/tbcImg/web/images/thumbnail_800x400.jpg">

<!-- 네이버 메타태그  -->
<meta name="naver-site-verification"
	content="fc1a579e4631c6dc9893ac5ca0754a0e7c2ba85c">

<link rel="shortcut icon"
	href="https://image.thebanchan.co.kr/tbcImg/web/images/common/favicon.ico">

<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/base.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/libs/slick.css">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/jquery-ui-1.10.4.custom.css">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/layout_new.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/common.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/popup.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/category.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/shopcategory.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/benefit.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/event.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/mydw.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/customer.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/member.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/cart.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/product_list.css?dummy=1721695271979">
<link rel="stylesheet"
	href="https://image.thebanchan.co.kr/tbcImg/web/common/css/product_view.css?dummy=1721695271979">
<script type="text/javascript">
		var isDebug = "real";
		</script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery-1.9.1.min.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/dropdown.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery.ajax.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery.bxslider.min.js"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/libs/swiper.min.js"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/libs/slick.min.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/libs/imageMapResizer.min.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery.countdown.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery.pajinate.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery-ui-1.10.3.custom.js"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/jquery.form.js"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/libs/bxslider.min.js"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/comm.js?dummy=1721695271979"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/ui.js?dummy=1721695271979"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/naverLogin_implicit-1.0.2.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/json2.js?dummy=1721695271979"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/dw_web.js?dummy=1721695271979"></script>
<script
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/pr_web.js?dummy=1721695271979"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/openBW.js"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/event.js?dummy=1721695271979"></script>
<script async=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/ga_tag_list.js?dummy=1721695271979"></script>
<script defer=""
	src="https://image.thebanchan.co.kr/tbcImg/web/common/js/renew_2021.js?dummy=1721695271979"></script>

<!-- 운영/개발 GTM 컨테이너 ID 통일 -->
<!-- Google Tag Manager -->
<script>
		(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-W97P9F7');
		</script>

<script type="text/javascript">
			//StringBuffer 객체 생성
			var StringBuffer = function() { this.buffer = new Array(); };
			StringBuffer.prototype.append   = function(str) { this.buffer[this.buffer.length] = str; };
			StringBuffer.prototype.toString = function()    { return this.buffer.join(""); };
		</script>

<script type="text/javascript" charset="UTF-8"
	src="//t1.daumcdn.net/kas/static/kp.js"></script>
<script type="text/javascript">
	if(typeof kakaoPixel !== "undefined"){
		kakaoPixel('2801026610865128966').pageView();
	}
	</script>

<script
	src="https://karrot-pixel.business.daangn.com/0.1/karrot-pixel.umd.js"></script>
<script>
		window.karrotPixel.init('1693804407264200001');
		window.karrotPixel.track('ViewPage');
	</script>
<script>
	(function (a_, i_, r_, _b, _r, _i, _d, _g, _e) {
		if (!a_[_b]) {
			var n = function () {
				var c = i_.createElement(r_);
				c.onerror = function () {
					g.queue.filter(function (a) {
						return 0 <= _d.indexOf(a[0])
					}).forEach(function (a) {
						a = a[1];
						a = a[a.length - 1];
						"function" === typeof a && a("error occur when load airbridge")
					})
				};
				c.async = 1;
				c.src = _r;
				"complete" === i_.readyState ? i_.head.appendChild(c) : a_.addEventListener("load", function h() {
					a_.removeEventListener("load", h);
					i_.head.appendChild(c)
				})
			}, g = {
				queue: [], get isSDKEnabled() {
					return !1
				}
			};
			_i.concat(_d).forEach(function (c) {
				var a = c.split("."), h = a.pop();
				a.reduce(function (p, q) {
					return p[q] = p[q] || {}
				}, g)[h] = function () {
					g.queue.push([c, arguments])
				}
			});
			a_[_b] = g;
			0 < _g ? (_b = new (a_.XDomainRequest || a_.XMLHttpRequest), _i = function () {
			}, _b.open("GET", _r), _b.timeout = _g, _b.onload = function () {
				n()
			}, _b.onerror = _i, _b.onprogress = _i, _b.ontimeout = _i, _b.send()) : n()
		}
	})(window, document, "script", "airbridge", "//static.airbridge.io/sdk/latest/airbridge.min.js", "init startTracking fetchResource setBanner setDownload setDownloads openDeeplink setDeeplinks sendWeb setUserAgent setUserAlias addUserAlias setMobileAppData setUserId setUserEmail setUserPhone setUserAttributes clearUser setDeviceAlias removeDeviceAlias clearDeviceAlias setDeviceIFV setDeviceIFA setDeviceGAID events.send events.signIn events.signUp events.signOut events.purchased events.addedToCart events.productDetailsViewEvent events.homeViewEvent events.productListViewEvent events.searchResultViewEvent".split(" "), ["events.wait", "createTouchpoint"], 0);


	
			airbridge.init({
				app: 'thebanchan',
				webToken: '5b924a349ca8495d8885daadffbcbd44',
				utmParsing: true
			});
		</script>
<title>이미지 업로드_더반찬&amp;</title>
<script async="" src="//static.airbridge.io/sdk/latest/airbridge.min.js"></script>
</head>
<body>
	<noscript>
		<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W97P9F7"
			height="0" width="0" style="display: none; visibility: hidden"></iframe>
	</noscript>
	<div id="popup_wrap">
		<div id="popup">
			<div id="popup_header">
				<h1>동원몰 CI</h1>
				<h2>파일 업로드</h2>
			</div>
			<div id="popup_container" class="popup_imageupload">
				<div id="popup_content">
					<form id="frm" name="frm" method="post"
						enctype="multipart/form-data">
						<input type="hidden" id="pathType" name="pathType"
							value="product_review"> <input type="hidden" id="Allow"
							name="Allow" value="image"> <input type="hidden"
							id="fileCnt" name="fileCnt" value="`${fileCnt}`"> <input
							type="hidden" id="dateFolderFlag" name="dateFolderFlag"
							value="`${fileCnt}`"> <input type="hidden"
							id="fileExtValidText" name="fileExtValidText"
							value="php,php3,php5,html,asp,aspx,ascx,jsp,cfm,cfc,pl,bat,exe,dll,reg,cgi,js">
						<input type="hidden" id="fileAllowValidText"
							name="fileAllowValidText" value="jpg,gif,jpeg,png,bmp"> <input
							type="hidden" id="callFunction" name="callFunction"
							value="resultFileExec"> <input type="hidden" id="callMsg"
							name="callMsg" value=""> <input type="hidden"
							id="fileObj" name="fileObj" value="reviewFile"> <input
							type="hidden" id="subPathName" name="subPathName" value="">

						<div class="pimcon1">
							<span class="instyle"><input type="file" id="upload"
								name="upload" class="input_file" title="이미지 찾아보기"></span>
						</div>
						<p class="pimbtn">
							<a href="#this" id="fileSubmit" class="btn_blue_27"><i>확인</i></a>
							<a href="#close" onclick="javascript:p_closeWin()"
								class="btn_b_blue_27"><i>취소</i></a>
						</p>

					</form>
				</div>
			</div>
			<div id="popup_footer">
				<div class="btn_close">
					<a href="#close" onclick="javascript:p_closeWin()">창닫기</a>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){
	var options = {
			beforeSubmit:showRequest,	// pre-submit callback
			success:showResponse,	// post-submit callback
			dataType:'json'
		};
	$("#fileSubmit").click(function(){

		$("#fileCnt").val(${fileCnt});
		$("#frm").attr("action", "/common/upload_proc_Json.do");
		$("#frm").ajaxSubmit(options);
		return false;
	});
});

function showRequest(formData, jqForm, options){
	// 확장자 체크
	var obj = $.trim($("#upload").val());
	var pathpoint = obj.lastIndexOf('.');
    var filepoint = obj.substring(pathpoint+1,obj.length);
    var filetype = filepoint.toLowerCase();
    var arrFileExtValidText = $.trim($("#fileExtValidText").val()).split(",");
    var arrFileAllowValidText = $.trim($("#fileAllowValidText").val()).split(",");

    if (obj == ""){
    	alert("파일을 선택해 주세요.");
    	return false;
    } else {
    	var fileSize = $('#upload')[0].files[0].size;
    	if($("#Allow").val()=="image"){
    		var maxSizeInBytes = 1024 * 1024 * 2;
        	if (fileSize > maxSizeInBytes) {
                alert('파일 크기가 너무 큽니다. 2MB 이하의 파일을 선택해주세요.');
                return false;
            }
    	}
    	if($("#Allow").val()=="video"){
    		var maxSizeInBytes = 1024 * 1024 * 50;
        	if (fileSize > maxSizeInBytes) {
                alert('파일 크기가 너무 큽니다. 50MB 이하의 파일을 선택해주세요.');
                return false;
            }
    	}
    }

    if (arrFileExtValidText.length > 1){
    	for(var i=0;i<arrFileExtValidText.length;i++){
    		var item = arrFileExtValidText[i].toLowerCase();
    		if (item == filetype){
    			alert("["+filetype+"] 형식은 업로드 할 수 없습니다.");
    			return false;
    		}
    	}
    }
    var allowFlag = "N";
    if (arrFileAllowValidText.length > 1){
    	for(var i=0;i<arrFileAllowValidText.length;i++){
    		var item = arrFileAllowValidText[i].toLowerCase();
    		if (item == filetype){
    			allowFlag = "Y";
    		}
    	}
    }else if(arrFileAllowValidText != ""){
    	var item = arrFileAllowValidText;
		if (item == filetype){
			allowFlag = "Y";
		}
    }
    if (arrFileAllowValidText.length > 1 && allowFlag == "N"){
    	alert("["+ $.trim($("#fileAllowValidText").val()) +"] 형식의 확장자만 업로드 해주세요.");
    	return false;
    }else if(arrFileAllowValidText != "" && allowFlag == "N"){
    	alert("["+ $.trim($("#fileAllowValidText").val()) +"] 형식의 확장자만 업로드 해주세요.");
    	return false;
	}
    return true;
}
function showResponse(responseText, statusText, xhr, $form){
	console.log(responseText.data);
	if(responseText.data.errorMsg != undefined){
		alert(responseText.data.errorMsg);
		return false;
	}
	if (statusText == "success"){
		var callFunction = $.trim($("#callFunction").val());
		var callMsg = $.trim($("#callMsg").val());
		if (callMsg != ""){
			alert(callMsg);
		}
		if (callFunction != ""){
			var func = eval("opener."+callFunction);
			callBackFunction(callback, responseText, func);
		}
		
		self.close();
	}
}
function callback(data, func) {
    func.call(this, data);
}
function callBackFunction(func) {
    this.called = 'you';
	self.close();
    if (func.apply == Function.prototype.apply) {
        arguments.shift = Array.prototype.shift;
        arguments.shift().apply(this, arguments);
    }

}
</script>

</body>
</html>